<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Register ‚Äî Civic Monitor</title>
    <link rel="stylesheet" href="/static/style.css">
    <style>
        select.input {
            appearance: none;
            -webkit-appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' fill='%2394a3b8' viewBox='0 0 16 16'%3E%3Cpath d='M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 12px;
            padding-right: 40px;
        }

        select.input option {
            background: #0d1117;
            color: #f1f5f9;
        }

        .password-strength {
            height: 4px;
            border-radius: 999px;
            margin-top: 8px;
            background: rgba(255, 255, 255, 0.06);
            overflow: hidden;
            transition: all 0.3s ease;
        }

        .password-strength .bar {
            height: 100%;
            border-radius: 999px;
            transition: width 0.4s ease, background 0.4s ease;
            width: 0;
        }
    </style>
</head>

<body>

    <canvas id="particles-canvas"></canvas>

    <div class="login-wrapper">
        <div class="login-card glass animate-fade-in-up" style="max-width:480px;">
            <span class="login-icon">‚ú®</span>
            <div class="subtitle">Create Your Account</div>
            <h1>Join Civic Monitor</h1>
            <p>Register to start reporting &amp; resolving civic issues</p>

            {% if error %}
            <div style="background: rgba(239,68,68,0.1); border: 1px solid rgba(239,68,68,0.3); 
                    border-radius: 12px; padding: 12px 16px; margin-bottom: 20px; 
                    color: #ef4444; font-size: 0.85rem; font-weight: 600;">
                ‚ö†Ô∏è {{ error }}
            </div>
            {% endif %}

            <form method="post" action="/register" style="text-align:left;">
                <div class="form-group">
                    <label>üë§ Full Name</label>
                    <input class="input" type="text" name="name" placeholder="Your full name" required>
                </div>
                <div class="form-group">
                    <label>üìß Email Address</label>
                    <input class="input" type="email" name="email" placeholder="you@example.com" required>
                </div>
                <div class="form-group">
                    <label>üîë Password</label>
                    <input class="input" type="password" name="password" id="password" placeholder="Min 6 characters"
                        required minlength="6">
                    <div class="password-strength">
                        <div class="bar" id="strength-bar"></div>
                    </div>
                </div>
                <div class="form-group">
                    <label>üé≠ Role</label>
                    <select class="input" name="role" required>
                        <option value="" disabled selected>Select your role</option>
                        <option value="surveyor">üì∏ Surveyor ‚Äî Report issues</option>
                        <option value="engineer">üßë‚Äçüîß Engineer ‚Äî Resolve issues</option>
                        <option value="admin">üõ°Ô∏è Admin ‚Äî Manage dashboard</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>üèòÔ∏è Ward Number</label>
                    <input class="input" type="number" name="ward" placeholder="e.g. 3" required min="1">
                </div>
                <button class="btn btn-green" type="submit" style="width:100%; padding:16px; font-size:1rem;">
                    üöÄ Create Account
                </button>
            </form>

            <div style="margin-top:20px; padding-top:16px; border-top: 1px solid rgba(255,255,255,0.06);">
                <p style="color:var(--text-dim); font-size:0.82rem;">
                    Already have an account? <a href="/"
                        style="color:var(--accent-light); text-decoration:none; font-weight:600;">Sign In ‚Üí</a>
                </p>
            </div>
        </div>
    </div>

    <script>
        // Password strength indicator
        var pwd = document.getElementById('password');
        var bar = document.getElementById('strength-bar');
        pwd.addEventListener('input', function () {
            var len = this.value.length;
            var pct = 0, color = '#ef4444';
            if (len >= 2) { pct = 25; color = '#ef4444'; }
            if (len >= 4) { pct = 50; color = '#f59e0b'; }
            if (len >= 6) { pct = 75; color = '#06b6d4'; }
            if (len >= 8) { pct = 100; color = '#10b981'; }
            bar.style.width = pct + '%';
            bar.style.background = color;
            bar.style.boxShadow = '0 0 10px ' + color;
        });

        // Particles
        var canvas = document.getElementById('particles-canvas');
        var ctx = canvas.getContext('2d');
        var particles = [];
        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.addEventListener('resize', resize); resize();

        function Particle() { this.reset(); }
        Particle.prototype.reset = function () {
            this.x = Math.random() * canvas.width;
            this.y = Math.random() * canvas.height;
            this.size = Math.random() * 1.5 + 0.3;
            this.speedX = (Math.random() - 0.5) * 0.3;
            this.speedY = (Math.random() - 0.5) * 0.3;
            this.opacity = Math.random() * 0.3 + 0.05;
            this.hue = [239, 186, 155][Math.floor(Math.random() * 3)];
        };
        Particle.prototype.update = function () {
            this.x += this.speedX; this.y += this.speedY;
            if (this.x < 0 || this.x > canvas.width || this.y < 0 || this.y > canvas.height) this.reset();
        };
        Particle.prototype.draw = function () {
            ctx.beginPath();
            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
            ctx.fillStyle = 'hsla(' + this.hue + ', 70%, 60%, ' + this.opacity + ')';
            ctx.fill();
        };
        for (var i = 0; i < 45; i++) particles.push(new Particle());
        function animateP() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (var j = 0; j < particles.length; j++) { particles[j].update(); particles[j].draw(); }
            requestAnimationFrame(animateP);
        }
        animateP();
    </script>

</body>

</html>